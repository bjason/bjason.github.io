<!DOCTYPE html>




<html class="theme-next muse" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />


<link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:400,500,700,900&display=swap&subset=chinese-simplified" rel="stylesheet">




<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.4">


  <link rel="mask-icon" href="/images/safari-pinned-tab.svg?v=5.1.4" color="#222">



  <meta name="msapplication-config" content="/images/browserconfig.xml" />



  <meta name="keywords" content="乐评,音乐,创作," />










<meta name="description" content="如果你问 James Murphy 是选择当下的快乐还是永恒的痛苦进行艺术创作，我想他大概会把 All My Friends 端上来——庸才才做选择，他说他全都要。这首歌的歌词描绘了一群中年人的派对，从认不出榜单上当下流行的音乐，到拒绝用天气开启常规的谈话，直到他们最终接受了自己已经年华老去的事实。这种抵抗性的中年危机的痛苦混合着听着不再年轻的音乐时的情不自禁，半苦半甜渗透到了这首歌的">
<meta property="og:type" content="article">
<meta property="og:title" content="All My Friends是如何创造苦乐参半的听感的">
<meta property="og:url" content="https://bjason.github.io/2020/02/28/friends%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9B%E9%80%A0%E8%8B%A6%E4%B9%90%E5%8F%82%E5%8D%8A%E7%9A%84%E5%90%AC%E6%84%9F%E7%9A%84/index.html">
<meta property="og:site_name">
<meta property="og:description" content="如果你问 James Murphy 是选择当下的快乐还是永恒的痛苦进行艺术创作，我想他大概会把 All My Friends 端上来——庸才才做选择，他说他全都要。这首歌的歌词描绘了一群中年人的派对，从认不出榜单上当下流行的音乐，到拒绝用天气开启常规的谈话，直到他们最终接受了自己已经年华老去的事实。这种抵抗性的中年危机的痛苦混合着听着不再年轻的音乐时的情不自禁，半苦半甜渗透到了这首歌的">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-02-29T01:48:38.000Z">
<meta property="article:modified_time" content="2020-03-26T20:53:52.042Z">
<meta property="article:author" content="Jason Lei">
<meta property="article:tag" content="乐评">
<meta property="article:tag" content="音乐">
<meta property="article:tag" content="创作">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bjason.github.io/2020/02/28/friends是如何创造苦乐参半的听感的/"/>





  <title>All My Friends是如何创造苦乐参半的听感的 | </title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand gradient" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title"></span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-projects">
          <a href="/projects" rel="section">
            
            项目
          </a>
        </li>
      
        
        <li class="menu-item menu-item-gallery">
          <a href="/gallery" rel="section">
            
            图库
          </a>
        </li>
      
        
        <li class="menu-item menu-item-map">
          <a href="/Map" rel="section">
            
            足迹
          </a>
        </li>
      
        
        <li class="menu-item menu-item-channel">
          <a href="/Channel" rel="section">
            
            视频频道
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://bjason.github.io/2020/02/28/friends%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9B%E9%80%A0%E8%8B%A6%E4%B9%90%E5%8F%82%E5%8D%8A%E7%9A%84%E5%90%AC%E6%84%9F%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Lei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/android-chrome-192x192.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="">
    </span>

    
      <header class="post-header">

        
        
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-28T17:48:38-08:00">
                2020-02-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9F%B3%E4%B9%90/" itemprop="url" rel="index">
                    <span itemprop="name">音乐</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/02/28/friends%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9B%E9%80%A0%E8%8B%A6%E4%B9%90%E5%8F%82%E5%8D%8A%E7%9A%84%E5%90%AC%E6%84%9F%E7%9A%84/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/02/28/friends%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9B%E9%80%A0%E8%8B%A6%E4%B9%90%E5%8F%82%E5%8D%8A%E7%9A%84%E5%90%AC%E6%84%9F%E7%9A%84/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <center>
<iframe src="https://open.spotify.com/embed/track/2Ud3deeqLAG988pfW0Kwcl" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
</center>

<br/>

<p>如果你问 James Murphy 是选择当下的快乐还是永恒的痛苦进行艺术创作，我想他大概会把 All My Friends 端上来——庸才才做选择，他说他全都要。这首歌的歌词描绘了一群中年人的<b>派对</b>，从认不出榜单上当下流行的音乐，到拒绝用天气开启常规的谈话，直到他们最终接受了自己已经年华老去的事实。这种抵抗性的中年危机的<b>痛苦</b>混合着听着不再年轻的音乐时的情不自禁，半苦半甜渗透到了这首歌的每一个角落。但即便抛开歌词，这首歌依然有着强烈的苦乐参半的味道——你的双腿忍不住抖动起来，但旋律又似乎有些伤感，James Murphy 把享乐的 Alternative Dance 和低落的后朋结合到了一起——他到底是怎么把他声嘶力竭的缄默藏在这个7分钟的怪物里、创造出这种丰富而厚重的听感的？</p>
<a id="more"></a>

<p>If you ask James Murphy whether he wants to compose out of the joy of the moment or the pain of eternity, I think he’s probably going to bring up All My Friends – only the mediocre make choices, he wants both of them. The song’s lyrics depict a group of middle-aged people partying, where they found trouble figuring out the popular music in the charts and refuse to make a regular conversation on the weather, until they finally come to terms with the fact that they are getting aged. The pain of this resistant midlife crisis, mixed with the excitement of listening to music that is no longer young, seeps into every corner of the song. But even beyond the lyrics, the song still has a strong bittersweet taste – your legs can’t help shaking up while the melody seems to be kind of sad. James Murphy combines the hedonism of the Alternative Dance with the depression of Post Punk. How on earth did he make it to hide the silence of shouting himself hoarse in this 7-minute monster, creating this rich and thick sound?</p>
<p>如果细细解剖这首歌，你会发现他几乎在每个层面都在进行这种苦和乐的对比。最明显地，这明明是一首<b>跳舞音乐</b>，你听过New Order的合成器脉冲波，听过Pet Shop Boys 的高能 Eurodance 鼓点，但 All My Friends 的前半部分所有的律动感却几乎都由<b>钢琴</b>提供。经过将近1分钟的铺垫后，异常宽敞的Gated Reverb军鼓加入到了节拍中，然而它却戛然而止，只在第一个小节漫不经心地出现一次，随后慢慢变得密集——一种非常纸面上的推进感——一直到5分钟的时候，它才终于展现了它作为跳舞音乐脊梁骨的推进感，占满了整个4/4拍。这种对鼓点的克制使用让人不难想到是为了呼应派对的主题，刚开始的不热络，逐渐因为醉醺醺而变得激烈起来。</p>
<p>If you dissect the song, you will find that he is making this kind of bitter-sweet contrast on almost every level. Most obviously, All My Friends is a dance music – you’ve heard the synthesizer pulsations of New Order and the high-energy Eurodance drums from the Pet Shop Boys – but the groove of the first half of this track is provided by the piano. After the build-up for nearly one minute, this abnormal spacious Gated Reverb snare joined the beat, but then it abruptly ends, leaving it only carelessly appears once in every bar. Then the snare slowly become denser – a straightforward kind of progression – it finally boosts up the groovy vibe as the spine of a dance music until the middle of the track by filling the entire 4/4 beat. It is pretty obvious that this restrained use of drums is a metaphor to the theme of the party, which implies the party is initially being lukewarm, but gradually becomes heated due to the intoxication.</p>
<p>贯穿始终的钢琴也是如此，它是几乎完全由A大调和弦构造的单一结构，人们对音乐听感的探索已经持续很久了，不论是Christian Friedrich Daniel Schubart的华丽辞藻<sup><a href="#ref1">注1</a></sup>还是进入当代之后更科学的研讨方式，公认的说法是，大调比小调听起来更“快乐”——同样是A大调的朋克先锋Blitzkrieg Bop听起来就分外振奋人心。理性上，这是一首“快乐”的歌。在这个规整的、<b>令人清醒</b>的键盘淡入之后，James又引入了一个低八度的E，然而它却没有遵循十六分音符的节拍，反而<b>东倒西歪</b>，混乱得像是喝醉了一样。</p>
<p>The piano throughout the track does it too, which is almost entirely composed of the single structure of repetition of A major chords. In music theory, it is generally accepted that major scale is “happier” than minor scale. It is also the case in A-major punk pioneer Blitzkrieg Bop which sounds fairly encouraging. Rationally, All My Friends is supposed to be a happy song. After the neat, sobering keyboard fades in, James introduces an E from one octave lower, which instead of following the cadence of the sixteenths, tilts and turns everything into a drunken mess.</p>
<p>包括其他的所有乐器，贝斯：A和弦时<b>散漫</b>，D和弦时<b>紧缩</b>；同时出现的两种吉他：电吉他<b>安心</b>的音色，Crunch吉他<b>尖锐</b>的过载声。在这首歌里，所有的苦和乐都是精心设计的（以上所有的黑体都是苦乐的对比），它们从Pink Floyd里跑出来、从Phil Collins的鼓里跑出来、从AC/DC的粗粝吉他里跑出来<sup><a href="#ref2">注2</a></sup>，而James Murphy毫不客气地把他们一一摆在你眼前，他就是要每一个被时光捶到墙角的人在这首歌里还岁月一个耳光。All My Friends的快乐是自毁式的，说到底，人类的终极恐惧就是死亡，老去就是把我们推向这个火堆的过程，这种渐进式的、持续不断的、无法解决的恐惧就如同那个持续不断的、耳鸣般的键盘一样，在他们的纪录片里，James正是从这个极为“单调”的钢琴开始的这首歌的创作。这首歌就是从这个简单的隐喻开始，然后成为了所有人的赞歌：因为所有人都会老去，所有人都会假装，所有人都会被转眼又五年的伤感所打动，所有人都会假以时日用“the memory of our betters”来自我宽慰<sup><a href="#ref3">注3</a></sup>。James Murphy用这首歌敬所有的不甘，敬所有无法重现的美好时日，敬所有的豪言壮语，敬所有未出席派对的、无法再次见到的好友，但是在此之前，请让我们在这场派对里用歇斯底里和忘却抵御老去，最后一次疯狂。 </p>
<p>The comparison continues in all the other instruments. Bass: swings loosely in A chord, tightly in D chord; Two kinds of guitars appear at the same time: the soothing tone of the electric guitar and the sharp overload sound of the Crunch guitar. In this song, all the bitterness and the sweetness are well designed. They escaped from the Pink Floyd, ran out of the drum of Phil Collins, slipped out of the AC/DC coarseness guitar. James Murphy unceremoniously placed each of them just in front of you, and his intention is to give everyone a chance to slap the time on its face. The cheer of All My Friends is self-destructed. After all, the ultimate fear of human beings is death and getting old is the procedure of being pushed to the end. This gradual, continuous, insoluble kind of fear is just like the constant, tinnitus-oid keyboards in the background while in the documentary, James starts the creation of this timeless masterpiece from this “monotonous” piano. This track begins merely with this simple metaphor and then becomes an anthem for every human being, just because everyone ages, everyone pretends, everyone is moved by the sadness of turning into another five years so quick, everyone is going to comfort themselves by “the memory of our betters”. It is a toast to all the unwillingness, all the good old days that will never come back, all the brave words, all the friends that absent from here and may never ever meet up again. Regardless all of that, please let us resist this getting-old bitterness with hysteria and oblivion in this party, being even crazier for the one last time.</p>
<p><span id="ref1">[注1]: Ideen zu einer Aesthetik der Tonkunst, Vienna, 1806 (excerpts)</span></p>
<p><span id="ref2">[注2]: Pink Floyd指歌词”We set controls for the heart of the sun”；Phil Collins指前文所述的Gated Reverb鼓声，他发明了这种鼓声；AC/DC指前文所述的Crunch吉他，他们以Crunch音色的吉他闻名。(<a href="https://genius.com/Lcd-soundsystem-all-my-friends-lyrics" target="_blank" rel="noopener">https://genius.com/Lcd-soundsystem-all-my-friends-lyrics</a>)</span></p>
<p><span id="ref3">[注3]: 以上均为歌词，“假装”指歌词”I know it gets tired, but it’s better when we pretend”，“转眼又五年”指” You spent the first five years trying to get with the plan / And the next five years trying to be with your friends again”，“the memory of our betters”指” Then it’s the memory of our betters / That are keeping us on our feet”。</span></p>
<p>原文：<a href="https://music.douban.com/review/12312187/" target="_blank" rel="noopener">https://music.douban.com/review/12312187/</a></p>

      
    
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E4%B9%90%E8%AF%84/" rel="tag"># 乐评</a>
          
            <a href="/tags/%E9%9F%B3%E4%B9%90/" rel="tag"># 音乐</a>
          
            <a href="/tags/%E5%88%9B%E4%BD%9C/" rel="tag"># 创作</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              
                <a href="/2020/03/21/%E6%88%90%E9%83%BD%E6%B7%B9%E6%B2%A1/" rel="prev">
                  <i class="fa fa-chevron-left"></i> 成都<br/>淹没
                </a>
              
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              
                <a href="/2020/02/22/GrimesLP5/" rel="next" title="翻译 Pitchfork 乐评 Miss Anthropocene - Grimes">
                  翻译 Pitchfork 乐评 Miss Anthropocene - Grimes <i class="fa fa-chevron-right"></i>
                </a>
              
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/android-chrome-192x192.png"
                alt="Jason Lei" />
            
              <p class="site-author-name" itemprop="name">Jason Lei</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">49</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <div class="sidebar-signature motion-element">
  <span class="signature-svg motion-element"></span>
</div>
        </div>
      </section>

      

      
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Lei</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a></div>



  <div class="footer-custom">Visit me at <a href="https://github.com/bjason" target="_blank" rel="noopener">GitHub</a> <a href="https://www.douban.com/people/Billei/" target="_blank" rel="noopener">豆瓣</a> <a href="https://www.weibo.com/leiyuchu/" target="_blank" rel="noopener">微博</a> <a href="https://vsco.co/billei/gallery" target="_blank" rel="noopener">VSCO</a> <a href="https://www.instagram.com/_bjsn/" target="_blank" rel="noopener">Instagram</a> <a href="https://www.last.fm/user/BilleiJason" target="_blank" rel="noopener">Last.fm</a> <a href="https://open.spotify.com/user/22bbslwmudhmf5g4clsondfbi?si=ZSDSaAdYQ8yclrZ1LTE2iA" target="_blank" rel="noopener">Spotify</a> <a href="https://www.jianshu.com/u/129a345ca11b" target="_blank" rel="noopener">简书</a></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'drjbdjfyaSNdGyqe2mLwBhbp-gzGzoHsz',
        appKey: '9l2u4bbtGMysmQpW3vHzmWta',
        placeholder: 'Comment',
        avatar:'hide',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "default";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

</body>
</html>
